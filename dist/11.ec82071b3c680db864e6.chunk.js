webpackJsonp([11],{187:function(e,t,o){o(239);var a=o(9)(o(221),o(261),"data-v-771e6ae2",null);a.options.__file="/Users/miaobingliang/Desktop/超想去旅行/we-travel-back/src/views/productManage.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] productManage.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},221:function(e,t,o){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(10);t.default={data:function(){var e=this;return{uid:"",productNumber:"",modal1:!1,modal2:!1,showTypeSelected:0,sortArray:[],rawDataArray:[],modifyObj:{isSort:!1,isFollowTeam:!1,isFreeTravel:!1,isSpecialPrice:!1,isRecommend:!1},showTypes:[{label:"全部",value:0}],columns:[{title:"名称",key:"name",width:150},{title:"置顶",key:"isSort"},{title:"特价",key:"isSpecialPrice"},{title:"自由行",key:"isFreeTravel"},{title:"推荐",key:"isRecommend"},{title:"跟团游",key:"isFollowTeam"},{title:"分类",key:"action",width:150,align:"center",render:function(t,o){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.sortOperation(o)}}},"操作")])}},{title:"操作",key:"action",width:150,align:"center",render:function(t,o){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.modfifyProduct(o)}}},"修改"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deleteProduct(o)}}},"配置")])}}],dataArray:[]}},created:function(){this.configData(),this.congfigChooseType()},methods:{checkGroupChange:function(e){var t=this,o=new Set,i=!0,r=!1,n=void 0;try{for(var s,l=t.rawDataArray[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,u=!0,d=!0,m=!1,p=void 0;try{for(var f,v=e[Symbol.iterator]();!(d=(f=v.next()).done);d=!0){1!=c[f.value]&&(u=!1)}}catch(e){m=!0,p=e}finally{try{!d&&v.return&&v.return()}finally{if(m)throw p}}u&&o.add(c)}}catch(e){r=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw n}}t.dataArray=[].concat(a(o)),e.length||(t.dataArray=t.rawDataArray)},configData:function(){var e=this;i.a.getProductList(function(t){e.dataArray=t,e.rawDataArray=t},function(t){e.$Message.error("获取数据失败请重试")})},congfigChooseType:function(){var e=this;i.a.getThemelist().then(function(t){t.length&&(e.showTypes=[{label:"全部",value:0}],t.forEach(function(t){e.showTypes.push({label:t.attributes.name,value:t.attributes.type})}))})},sortOperation:function(e){this.modal2=!0,this.productNumber=e.row.onleyId,this.uid=e.row.uid;var t=e.row;this.modifyObj.isSort=t.isSort||!1,this.modifyObj.isSpecialPrice=t.isSpecialPrice||!1,this.modifyObj.isFollowTeam=t.isFollowTeam||!1,this.modifyObj.isFreeTravel=t.isFreeTravel||!1,this.modifyObj.isRecommend=t.isRecommend||!1},modfifyProduct:function(e){var t=e.row.uid;this.$router.push({name:"upload",params:{productId:t}})},deleteProduct:function(e){this.modal1=!0,this.productNumber=e.row.onleyId,this.uid=e.row.uid},confirmOperation:function(){this.setFirst()},removeProdcut:function(e){var t=this;i.a.deleteProductWithId(this.uid,function(){t.configData()})},showTypeChange:function(e){var t=this;e=this.showTypeSelected,0==e?t.configData():i.a.getDetailItemList(e).then(function(e){var o=[],a=!0,i=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(a=(n=s.next()).done);a=!0){var l=n.value;l.attributes.uid=l.id,o.push(l.attributes)}}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}t.dataArray=o},function(e){})},setFirst:function(){var e=this,t=this;i.a.setFirstProduct(this.uid,this.modifyObj).then(function(o){e.$Message.success("操作成功"),t.showTypeChange()},function(t){e.$Message.error("操作失败")})}}}},239:function(e,t){},261:function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("div",{staticClass:"header",staticStyle:{"margin-top":"20px"}},[o("Row",[o("Col",{attrs:{span:"2"}},[o("h4",{staticStyle:{"margin-top":"10px"}},[e._v("分类:")])]),e._v(" "),o("Col",{attrs:{span:"8"}},[o("Select",{staticStyle:{width:"200px"},on:{"on-change":e.showTypeChange},model:{value:e.showTypeSelected,callback:function(t){e.showTypeSelected=t},expression:"showTypeSelected"}},e._l(e.showTypes,function(t){return o("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),o("Col",{attrs:{span:"2"}},[o("h4",{staticStyle:{"margin-top":"10px"}},[e._v("过滤:")])]),e._v(" "),o("Col",{staticStyle:{margin:"0.5rem"},attrs:{span:"9"}},[o("CheckboxGroup",{on:{"on-change":e.checkGroupChange},model:{value:e.sortArray,callback:function(t){e.sortArray=t},expression:"sortArray"}},[o("Checkbox",{attrs:{label:"isSort"}},[o("Icon",{attrs:{type:"arrow-up-a"}}),e._v(" "),o("span",[e._v("置顶")])],1),e._v(" "),o("Checkbox",{attrs:{label:"isRecommend"}},[o("Icon",{attrs:{type:"navigate"}}),e._v(" "),o("span",[e._v("推荐")])],1),e._v(" "),o("Checkbox",{attrs:{label:"isSpecialPrice"}},[o("Icon",{attrs:{type:"star"}}),e._v(" "),o("span",[e._v("特价")])],1),e._v(" "),o("Checkbox",{attrs:{label:"isFreeTravel"}},[o("Icon",{attrs:{type:"navigate"}}),e._v(" "),o("span",[e._v("自由行")])],1),e._v(" "),o("Checkbox",{attrs:{label:"isFollowTeam"}},[o("Icon",{attrs:{type:"flag"}}),e._v(" "),o("span",[e._v("跟团游")])],1)],1)],1)],1)],1),e._v(" "),o("Table",{attrs:{height:"500",columns:e.columns,data:e.dataArray}}),e._v(" "),o("Modal",{attrs:{title:"删除操作"},on:{"on-ok":e.removeProdcut},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[o("p",[e._v("确认将编号为"+e._s(e.productNumber)+"的产品删除吗")])]),e._v(" "),o("Modal",{attrs:{title:"产品分类"},on:{"on-ok":e.confirmOperation},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[o("label",[e._v("是否置顶:")]),e._v(" "),o("i-switch",{model:{value:e.modifyObj.isSort,callback:function(t){e.$set(e.modifyObj,"isSort",t)},expression:"modifyObj.isSort"}}),e._v(" "),o("label",[e._v("是否特价:")]),e._v(" "),o("i-switch",{model:{value:e.modifyObj.isSpecialPrice,callback:function(t){e.$set(e.modifyObj,"isSpecialPrice",t)},expression:"modifyObj.isSpecialPrice"}}),e._v(" "),o("label",[e._v("是否推荐:")]),e._v(" "),o("i-switch",{model:{value:e.modifyObj.isRecommend,callback:function(t){e.$set(e.modifyObj,"isRecommend",t)},expression:"modifyObj.isRecommend"}}),e._v(" "),o("label",[e._v("是否自由行:")]),e._v(" "),o("i-switch",{model:{value:e.modifyObj.isFreeTravel,callback:function(t){e.$set(e.modifyObj,"isFreeTravel",t)},expression:"modifyObj.isFreeTravel"}}),e._v(" "),o("label",[e._v("是否跟团游:")]),e._v(" "),o("i-switch",{model:{value:e.modifyObj.isFollowTeam,callback:function(t){e.$set(e.modifyObj,"isFollowTeam",t)},expression:"modifyObj.isFollowTeam"}})],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});